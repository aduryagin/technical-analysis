query candles($interval: Interval!, $to: String, $figi: String, $ticker: String, $source: SourceName) {
  candles(interval: $interval, to: $to, figi: $figi, ticker: $ticker, source: $source) {
    time
    close
    open
    high
    low
    volume
    timestamp
  }
}

query searchInstrument($ticker: String!) {
  searchInstrument(ticker:$ticker) {
    ticker
    id
    figi
    source
  }
}

subscription watchList {
  watchList {
    ticker
    id
    figi
    price
    pricePercentChange
    source
  }
}

mutation watch($input: WatchInput!) {
  watch(input: $input) {
    id
  }
}

mutation unwatch($id: Float!) {
  unwatch(id: $id)
}

subscription candle($interval: Interval!, $ticker: String, $figi: String, $source: SourceName) {
  candle(interval: $interval, ticker: $ticker, figi: $figi, source: $source) {
    candle {
      time
      close
      open
      high
      low
      volume
      timestamp
    }
    instrument {
      id
      ticker
      figi
      source
    }
  }
}
query tradingViewIdeas($ticker: String!) {
  tradingViewIdeas(ticker: $ticker) {
    title
    link
    timeframe
    type
    date
    likes
    comments
    pureDate
  }
}

query tipRanksInfo($ticker:String!) {
  tipRanksInfo(ticker:$ticker) {
    priceTarget
    priceTargetHigh
    priceTargetLow
    ratingBuy
    ratingHold
    ratingSell
    stockScore
    newsSentimentBullishPercent
    newsSentimentBearishPercent
    lastWeekBuyNews
    lastWeekSellNews
    lastWeekNeutralNews
  }
}

# indicators

query indicators {
  indicators {
    name
    id
    settings
  }
}

mutation addIndicator ($input: AddIndicatorInput!) {
  addIndicator(input: $input) {
    id
  }
}

mutation removeIndicator($id: Float!) {
  removeIndicator(id: $id)
}

mutation updateIndicator($input: UpdateIndicatorInput!) {
  updateIndicator(input: $input) {
    id
  }
}

# sources

query sources {
  sources {
    id
    name
    key
    secret
  }
}

mutation addSource ($input: AddSourceInput!) {
  addSource(input: $input) {
    id
  }
}

mutation removeSource($id: Float!) {
  removeSource(id: $id)
}

mutation updateSource($input: UpdateSourceInput!) {
  updateSource(input: $input) {
    id
  }
}

# shapes

query shapes($ticker: String!) {
  shapes(ticker: $ticker) {
    id
    name
    ticker
    points {
      dataIndex
      timestamp
      value
    }
  }
}

mutation removeShape($id: Float!) {
  removeShape(id: $id)
}

mutation updateShape($input: UpdateShapeInput!) {
  updateShape(
    input: $input
  ) {
    id
  }
}

mutation addShape($input: AddShapeInput!) {
  addShape(
    input: $input
  ) {
    id
    ticker
    points {
      dataIndex
      timestamp
      value
    }
  }
}

subscription trades {
  trades {
    id
    price
    type
    closed
    pricePercentChange
    date
    instrument {
      id
      ticker
      figi
      source
    }
  }
}

mutation closeTrade($id: Float!) {
  closeTrade(id: $id)
}